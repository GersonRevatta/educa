<center>Gerson Revatta
  <%= form_for :post ,  :url => { :action => :create }  ,  html: { multipart: true }  do |f| %>
  <p>
    <%= f.label :title %><br>
    <%= f.text_field :title %>
  </p>

  <p>
    <%= f.label :description %><br>
    <%= f.text_area :description %>
  </p>
  
  <p>
    <%= f.file_field :avatar , :id => 'files', :name =>"files[]"%>
  </p>
  <output id="list"></output>
  <p>
    <%= f.submit %>
  </p>
<% end %>
<br>
</center>

<center>
<h3> List </h3>
  <% @Course.each do |i| %>
    <p><%= i.title %></p>
    <p>
      
    <%= image_tag i.avatar.url(:thumb) %>
    </p>
    |<%= link_to "show",{ :action => :show, :id => i.id }  %>
    | Editar
    
    | 
    <%= link_to "Eliminar",{ :action => :destroy, :id => i.id } , :method => :delete %>
  <% end %>

</center>

         
        <script>
              function archivo(evt) {
                  var files = evt.target.files; // FileList object
             
                  // Obtenemos la imagen del campo "file".
                  for (var i = 0, f; f = files[i]; i++) {
                    //Solo admitimos im√°genes.
                    if (!f.type.match('image.*')) {
                        continue;
                    }
             
                    var reader = new FileReader();
             
                    reader.onload = (function(theFile) {
                        return function(e) {
                          // Insertamos la imagen
                         document.getElementById("list").innerHTML = ['<img class="thumb" src="', e.target.result,'" title="', escape(theFile.name), '"/>'].join('');
                        };
                    })(f);
             
                    reader.readAsDataURL(f);
                  }
              }
             
              document.getElementById('files').addEventListener('change', archivo, false);
      </script>
      <style>
        
      </style>